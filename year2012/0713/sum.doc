我们对每次操作可以进行如下转换：
对于修改：[L,R]整体+d，可以视为[1,R]整体+d，然后[1,L-1]整体-d。
对于询问：求区间和，我们可以转换为求前缀和。
那么现在，每次操作或询问都是对于一个前缀的操作。
如果当前询问[1,X]，我们考虑之前每一次修改操作对答案的贡献：
对于之前修改操作(R,d)：
若R>X，那么该次修改操作对答案的贡献是：d*(1+X)*X/2。
若R<=X，那么它对答案的贡献是：d*(1+R)*R/2+(X-R)*R*d。
对于1，我们只需要查询所有R>X的修改中，d的和是多少。
对于2，我们将式子化简，(d*(R+1)*R/2-R*R*d)+(X*R*d)，对于前半部分，它只与每次询问本身有关，我们可以直接维护；对于后半部分，只需查询所有R<=x的修改中，R*d的和是多少。
这样，我们就可以用树状数组来解决这道题目。
复杂度O(MlogN)。
